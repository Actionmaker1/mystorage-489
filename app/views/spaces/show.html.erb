<h1>Check out this space!</h1>
<p>What do you think?</p>

<% if @space.image.attached? %>
  <div class="card-category" style="background-size: cover; height: 500px; width: 100%;background-image: url('<%= cl_image_path @space.image.key %>')">
  </div>
<% end %>
    <div class="col-12 d-flex mx-0 px-0">
      <div class="col-6 mx-0 px-0">
        <ul>
          <%= display_li_if_exists('location', 'Location') %>
          <%= display_li_if_exists('volume', 'Volume', 'm<sup>3</sup>') %>
          <%= display_li_if_exists('price_per_month', 'Price', '&euro; per month') %>
          <%= display_li_if_exists('condition', 'Condition') %>
          <%= display_li_if_exists('access', 'Access') %>
          <%= display_li_if_exists('description', 'Description') %>
        </ul>
      </div>
      <div class="col-6 mx-0 px-0">
        <div id="map"
           <img id="map" src='https://api.mapbox.com/styles/v1/mapbox/streets-v11/static/<% @space.latitude %>,<%= @space.longitude %>,10.45,0,0/600x1000?access_token=<%= ENV['MAPBOX_API_KEY'] %>'>
        </div>
      </div>
    </div>



    <%= link_to "VIEW ALL SPACES", spaces_path, class: 'btn btn-outline-secondary' %>
    <% if policy(@space).destroy? %>
      <%= link_to 'DELETE THIS PLACE', space_path(@space), class: 'btn btn-outline-secondary', method: :delete, data: { confirm: "Are you sure you want to delete this space?" } %>
    <% end %>
    <% if policy(@space).update? %>
      <%= link_to "UPDATE/EDIT", edit_space_path(@space), class: 'btn btn-outline-secondary' %>
    <% end %>
    <%= link_to "BOOK THIS SPACE", new_space_reservation_path(@space), class: 'btn btn-primary' %>

<% if !@space.reservations.count.zero? %>
  <h4 class="mt-3">This space is currently booked for the following dates</h2>
  <div class="list">
    <% @space.reservations.each do |reservation| %>
      <div class="reserved_date">
        <div class="date_block">
          <span class="month"><%= reservation.start_date.strftime("%B")[0..2] %></span> <span class="date"><%= reservation.start_date.strftime("%d") %></span>
        </div>
        <% unless reservation.start_date == reservation.end_date %>
          <span> – </span>
          <div class="date_block">
            <span class="month"><%= reservation.end_date.strftime("%B")[0..2] %></span> <span class="date"><%= reservation.end_date.strftime("%d") %></span>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
<% end %>
